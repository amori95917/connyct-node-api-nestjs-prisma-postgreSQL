//// ------------------------------------------------------
//// THIS FILE WAS AUTOMATICALLY GENERATED (DO NOT MODIFY)
//// ------------------------------------------------------

Table User {
  id String [pk]
  firstName String [not null]
  lastName String [not null]
  email String [unique, not null]
  username String [unique]
  password String [not null]
  emailToken String
  passwordToken String
  confirm Boolean [not null, default: false]
  isValid Boolean [not null, default: false]
  isActive Boolean [not null, default: false]
  isSuperuser Boolean [not null, default: false]
  createdAt DateTime [default: `now()`]
  updatedAt DateTime
  posts Post [not null]
  postRatings PostRating [not null]
  comment Comment [not null]
  commentRatings CommentRating [not null]
  userRoles UserRole [not null]
  RoleRight RoleRight [not null]
  employee CompanyEmployee
  Company Company [not null]

  indexes {
    (id, email) [unique]
  }
}

Table Role {
  id String [pk]
  name String [unique, not null]
  createdAt DateTime [default: `now()`]
  updatedAt DateTime
  userRoles UserRole [not null]
  RoleRight RoleRight [not null]
}

Table Right {
  id String [pk]
  name String [not null]
  createdAt DateTime [default: `now()`]
  updatedAt DateTime
  RoleRight RoleRight [not null]
}

Table UserRole {
  id String [pk]
  userId String [not null]
  user User [not null]
  roleId String [not null]
  role Role [not null]
  createdAt DateTime [default: `now()`]
  updatedAt DateTime
}

Table RoleRight {
  id String [pk]
  roleId String [not null]
  role Role [not null]
  rightId String [not null]
  right Right [not null]
  createdAt DateTime [default: `now()`]
  updatedAt DateTime
  User User
  userId String

  indexes {
    (roleId, rightId) [unique]
  }
}

Table Company {
  id String [pk]
  name String
  legalName String [not null]
  registrationNumber String
  establishedDate DateTime
  companyStage CompanyStage
  description String
  mission String
  vision String
  ownership Ownership
  addresses Json
  branches Branch [not null]
  numberOfemployees Int [not null, default: 1]
  contactEmail String
  transactions Float
  isActive Boolean [not null, default: false]
  isVerified Boolean [not null, default: false]
  createdAt DateTime [default: `now()`]
  updatedAt DateTime
  employees CompanyEmployee [not null]
  owner User [not null]
  ownerId String [not null]
}

Table Branch {
  id String [pk]
  name String [not null]
  contactNumber String [not null]
  contactEmail String [not null]
  createdAt DateTime [default: `now()`]
  updatedAt DateTime
  address Address [not null]
  Company Company [not null]
  companyId String [not null]
}

Table Address {
  id String [pk]
  country String [not null]
  city String [not null]
  state String
  zipCode String
  createdAt DateTime [default: `now()`]
  updatedAt DateTime
  Branch Branch
  branchId String
}

Table CompanyEmployee {
  id String [pk]
  employeeId String [unique, not null]
  employee User [not null]
  companyId String [not null]
  company Company [not null]
}

Table Tag {
  id String [pk]
  name String [unique, not null]
  posts Post [not null]
}

Table Post {
  id String [pk]
  text String [not null]
  rating Int [not null, default: 0]
  creatorId String [not null]
  creator User [not null]
  postRating PostRating [not null]
  comments Comment [not null]
  tags Tag [not null]
  createdAt DateTime [default: `now()`]
  updatedAt DateTime
}

Table PostRating {
  userId String [not null]
  postId String [not null]
  rating RatingStatus [not null]
  user User [not null]
  post Post [not null]

  indexes {
    (userId, postId) [unique]
  }
}

Table Comment {
  id String [pk]
  text String [not null]
  rating Int [not null, default: 0]
  creatorId String [not null]
  postId String
  repliedToId String
  commentRating CommentRating [not null]
  user User [not null]
  post Post
  parentComment Comment
  comments Comment [not null]
  createdAt DateTime [default: `now()`]
  updatedAt DateTime
}

Table CommentRating {
  userId String [not null]
  commentId String [not null]
  rating RatingStatus [not null]
  user User [not null]
  comment Comment [not null]

  indexes {
    (userId, commentId) [unique]
  }
}

Table PostToTag {
  postsId String [ref: > Post.id]
  tagsId String [ref: > Tag.id]
}

Enum CompanyStage {
  STARTUP
  SCALEUP
}

Enum Ownership {
  SOLE
  PARTNERSHIP
  CORPORATE
  LIMITEDLIABILITYCOMPANY
  NONPROFIT
}

Enum RatingStatus {
  NEUTRAL
  UPVOTED
  DOWNVOTED
}

Ref: UserRole.userId > User.id

Ref: UserRole.roleId > Role.id

Ref: RoleRight.roleId > Role.id

Ref: RoleRight.rightId > Right.id

Ref: RoleRight.userId > User.id

Ref: Company.ownerId > User.id

Ref: Branch.companyId > Company.id

Ref: Address.branchId > Branch.id

Ref: CompanyEmployee.employeeId - User.id

Ref: CompanyEmployee.companyId > Company.id

Ref: Post.creatorId > User.id

Ref: PostRating.userId > User.id

Ref: PostRating.postId > Post.id

Ref: Comment.creatorId > User.id

Ref: Comment.postId > Post.id

Ref: Comment.repliedToId - Comment.id

Ref: CommentRating.userId > User.id

Ref: CommentRating.commentId > Comment.id