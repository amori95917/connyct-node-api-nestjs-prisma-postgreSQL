//// ------------------------------------------------------
//// THIS FILE WAS AUTOMATICALLY GENERATED (DO NOT MODIFY)
//// ------------------------------------------------------

Table User {
  id String [pk]
  firstName String [not null]
  lastName String [not null]
  email String [unique, not null]
  username String [unique, not null]
  password String [not null]
  emailToken String
  passwordToken String
  confirm Boolean [not null, default: false]
  isValid Boolean [not null, default: false]
  isActive Boolean [not null, default: false]
  isSuperuser Boolean [not null, default: false]
  createdAt DateTime [default: `now()`]
  updatedAt DateTime
  posts Post [not null]
  postVotes PostVote [not null]
  comment Comment [not null]
  commentVotes CommentVote [not null]
  userRoles UserRole [not null]
  RoleRight RoleRight [not null]
  employee CompanyEmployee

  indexes {
    (id, email) [unique]
  }
}

Table Role {
  id String [pk]
  name String [unique, not null]
  createdAt DateTime [default: `now()`]
  updatedAt DateTime
  userRoles UserRole [not null]
  RoleRight RoleRight [not null]
}

Table Right {
  id String [pk]
  name String [not null]
  createdAt DateTime [default: `now()`]
  updatedAt DateTime
  RoleRight RoleRight [not null]
}

Table UserRole {
  id String [pk]
  userId String [not null]
  user User [not null]
  roleId String [not null]
  role Role [not null]
  createdAt DateTime [default: `now()`]
  updatedAt DateTime
}

Table RoleRight {
  id String [pk]
  roleId String [not null]
  role Role [not null]
  rightId String [not null]
  right Right [not null]
  createdAt DateTime [default: `now()`]
  updatedAt DateTime
  User User
  userId String

  indexes {
    (roleId, rightId) [unique]
  }
}

Table Company {
  id String [pk]
  name String [not null]
  legalName String [not null]
  registrationNumber String [not null]
  establishedDate DateTime [not null]
  companyStage CompanyStage [not null]
  description String [not null]
  mission String
  vision String
  ownership Ownership [not null]
  addresses Address [not null]
  branches Int [not null, default: 0]
  numberOfemployees Int [not null, default: 1]
  transactions Float [not null]
  isActive Boolean [not null]
  createdAt DateTime [default: `now()`]
  updatedAt DateTime
  employees CompanyEmployee [not null]
}

Table Address {
  id String [pk]
  country String [not null]
  city String [not null]
  state String [not null]
  zipCode String [not null]
  address1 String [not null]
  address2 String [not null]
  companyId String [unique, not null]
  createdAt DateTime [default: `now()`]
  updatedAt DateTime
  Company Company [not null]
}

Table CompanyEmployee {
  id String [pk]
  employeeId String [unique, not null]
  employee User [not null]
  companyId String [not null]
  company Company [not null]
}

Table Post {
  id String [pk]
  text String [not null]
  votes Int [not null, default: 0]
  authorId String [not null]
  author User [not null]
  postVotes PostVote [not null]
  comments Comment [not null]
  createdAt DateTime [default: `now()`]
  updatedAt DateTime
}

Table PostVote {
  userId String [not null]
  postId String [not null]
  votingStatus VotingStatus [not null]
  user User [not null]
  post Post [not null]

  indexes {
    (userId, postId) [unique]
  }
}

Table Comment {
  id String [pk]
  text String [not null]
  votes Int [not null, default: 0]
  creatorId String [not null]
  postId String
  repliedToId String
  commentVote CommentVote [not null]
  user User [not null]
  post Post
  parentComment Comment
  comments Comment [not null]
  createdAt DateTime [default: `now()`]
  updatedAt DateTime
}

Table CommentVote {
  userId String [not null]
  commentId String [not null]
  votingStatus VotingStatus [not null]
  user User [not null]
  comment Comment [not null]

  indexes {
    (userId, commentId) [unique]
  }
}

Enum CompanyStage {
  STARTUP
  SCALEUP
}

Enum Ownership {
  SOLE
  PARTNERSHIP
  CORPORATE
  LIMITEDLIABILITYCOMPANY
  NONPROFIT
}

Enum VotingStatus {
  NEUTRAL
  UPVOTED
  DOWNVOTED
}

Ref: UserRole.userId > User.id

Ref: UserRole.roleId > Role.id

Ref: RoleRight.roleId > Role.id

Ref: RoleRight.rightId > Right.id

Ref: RoleRight.userId > User.id

Ref: Address.companyId > Company.id

Ref: CompanyEmployee.employeeId - User.id

Ref: CompanyEmployee.companyId > Company.id

Ref: Post.authorId > User.id

Ref: PostVote.userId > User.id

Ref: PostVote.postId > Post.id

Ref: Comment.creatorId > User.id

Ref: Comment.postId > Post.id

Ref: Comment.repliedToId - Comment.id

Ref: CommentVote.userId > User.id

Ref: CommentVote.commentId > Comment.id